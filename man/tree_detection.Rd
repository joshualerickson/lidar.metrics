% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/canopy_metrics.R
\name{tree_detection}
\alias{tree_detection}
\title{Detect Trees and Compute Strata Metrics}
\usage{
tree_detection(
  x,
  y,
  z,
  window_func = function(x) {
     w <- pmax(x, 1)
     w <- log1p(w) * 1.5 + 2
     w <-
    pmin(w, 6)
     w[is.na(w) | w <= 0] <- 3
     return(w)
 },
  out_dir
)
}
\arguments{
\item{x}{Numeric vector of X coordinates.}

\item{y}{Numeric vector of Y coordinates.}

\item{z}{Numeric vector of Z (height) values.}

\item{window_func}{Function that returns a window size for tree detection.}

\item{out_dir}{Path for optional output directory (currently unused).}
}
\value{
A named list of tree metrics:
\itemize{
\item \code{n_trees}, \code{trees_per_acre}
\item \code{n_low}, \code{n_low_mid}, \code{n_mid}, \code{n_mid_upper}, \code{n_upper}
\item \code{topo_residual_sd}, \code{topo_entropy}
}
}
\description{
Detects individual trees using a variable window local maxima filter
and classifies trees into vertical strata. Also fits a spline surface
to derive topographic residual SD and entropy.
}
